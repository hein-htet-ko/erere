<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>You're Invited</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&display=swap');
    
    body {
      font-family: 'Cormorant Garamond', serif;
      overflow-y: hidden; /* locked until start */
      background: linear-gradient(to bottom, #fff0f5, #ffe4e1, #fff0f5);
    }
    html { scroll-behavior: smooth; }

    /* Floating hearts */
    .floating-heart {
      position: fixed;
      bottom: -50px;
      color: #ff69b4;
      font-size: 20px;
      animation: floatUp 6s linear infinite;
      opacity: 0.8;
      pointer-events: none;
    }
    @keyframes floatUp {
      0% { transform: translateY(0) scale(1); opacity: 0.9; }
      50% { opacity: 1; }
      100% { transform: translateY(-120vh) scale(1.3); opacity: 0; }
    }

    /* Falling petals */
    .petal {
      position: fixed;
      top: -40px;
      color: #ffb6c1;
      font-size: 22px;
      animation: fall 8s linear infinite;
      pointer-events: none;
    }
    @keyframes fall {
      0% { transform: translateX(0) rotate(0deg); opacity: 1; }
      50% { transform: translateX(50px) rotate(180deg); opacity: 0.9; }
      100% { transform: translateY(110vh) translateX(-50px) rotate(360deg); opacity: 0; }
    }

    /* Quotes fade */
    .quote {
      font-size: 1.5rem;
      font-weight: 300;
      color: #c71585;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 2s ease, transform 2s ease;
    }
    .quote.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Overlay */
    #start-overlay {
      background: linear-gradient(135deg, #ffe6f0 0%, #fff0f5 100%);
      overflow: hidden;
    }

    /* Closing text */
    #closing-text {
      text-shadow: 0 0 10px rgba(255,105,180,0.7);
    }

    img {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 1.5s ease, transform 1.5s ease;
    }
    img.visible {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>
<body class="bg-stone-50 text-stone-700 leading-relaxed antialiased">

  <!-- Romantic Overlay -->
  <div id="start-overlay" class="fixed inset-0 z-50 flex items-center justify-center transition-opacity duration-1000 ease-in-out opacity-100">
    <div class="flex flex-col items-center p-6 sm:p-10 rounded-xl bg-white/70 backdrop-blur-sm shadow-xl max-w-sm sm:max-w-md mx-4 text-center">
      <h1 class="text-4xl sm:text-5xl md:text-6xl font-extralight text-pink-700 mb-4">You're Invited</h1>
      <p class="text-xl sm:text-2xl font-light text-pink-500 mb-6">Tap to Begin</p>
      <button id="startButton" class="bg-pink-200 text-pink-800 font-medium py-3 px-8 rounded-full shadow-lg hover:bg-pink-300 transition-transform duration-300 transform hover:scale-105 active:scale-95">
        üíñ Begin Journey üíñ
      </button>
    </div>
  </div>

  <!-- Background Music -->
  <audio id="bg-music">
    <source src="./Ed Sheeran - Perfect.mp3" type="audio/mpeg">
    Your browser does not support the audio tag.
  </audio>

  <!-- Floating hearts & petals -->
  <div id="hearts-container"></div>
  <div id="petals-container"></div>

  <!-- Invitation Content -->
  <div id="invitation-container" class="relative w-full flex flex-col items-center justify-start text-center py-20 px-6 opacity-0 transition-opacity duration-1000 ease-in-out">
    
    <!-- Images + Quotes -->
    <div class="mb-12 sm:mt-40">
      <img src="./photos/7DecN&T.pptx.jpg" width="1700" height="720">
      <p class="quote mt-4">"Two souls, one journey, endless love."</p>
    </div>

    <div class="w-full h-px bg-stone-300 my-8"></div>
    <div class="mb-12">
      <img src="./photos/7DecN&T.pptx-2.jpg">
      <p class="quote mt-4">"This day marks the start of forever."</p>
    </div>

    <div class="w-full h-px bg-stone-300 my-8"></div>
    <div class="mb-12">
      <img src="./photos/7DecN&T.pptx-3.jpg">
      <p class="quote mt-4">"Together is our favorite place to be."</p>
    </div>

    <div class="w-full h-px bg-stone-300 my-8"></div>
    <div class="mb-12">
      <img src="./photos/7DecN&T.pptx-4.jpg">
      <p class="quote mt-4">"Love is not about how many days, but how deeply every moment is shared."</p>
    </div>

    <div class="w-full h-px bg-stone-300 my-8"></div>
    <div class="mb-12">
      <img src="./photos/7DecN&T.pptx -5.jpg">
      <p class="quote mt-4">"Every picture tells our love story."</p>
    </div>

    <div class="w-full h-px bg-stone-300 my-8"></div>
    <div class="mb-12">
      <img src="./photos/7DecN&T.pptx-6.jpg">
      <p class="quote mt-4">"A day to remember, a love to cherish forever."</p>
    </div>

    <div class="w-full h-px bg-stone-300 my-8"></div>
    <div class="mb-12">
      <img src="./photos/7DecN&T.pptx-7.jpg">
      <p class="quote mt-4">"Dreams do come true when we are together."</p>
    </div>

    <div class="w-full h-px bg-stone-300 my-8"></div>
    <div class="mb-12">
      <img src="./photos/7DecN&T.pptx-8.jpg">
      <p class="quote mt-4">"With you, every chapter is magical."</p>
    </div>

    <!-- closing screen -->
    <div class="my-20 text-pink-700 text-4xl font-light opacity-0 transition-opacity duration-2000" id="closing-text">
      üíç We can‚Äôt wait to celebrate with you üíç
    </div>
  </div>

<script>
window.addEventListener('load', () => {
  'use strict';

  const startButton = document.getElementById('startButton');
  const startOverlay = document.getElementById('start-overlay');
  const invitationContainer = document.getElementById('invitation-container');
  const bgMusic = document.getElementById('bg-music');
  const quotes = Array.from(document.querySelectorAll('.quote'));
  const images = Array.from(document.querySelectorAll('img'));
  const closingText = document.getElementById('closing-text');

  // Tunable speed (pixels per second). Increase to scroll faster.
  const PIXELS_PER_SECOND = 70;

  // Handles intervals/raf so we can cancel if needed
  let heartInterval = null;
  let petalInterval = null;
  let autoScrollRaf = null;
  let isScrolling = false;

  // Small helpers
  function createHeart() {
    const heart = document.createElement('div');
    heart.classList.add('floating-heart');
    heart.innerHTML = Math.random() > 0.5 ? 'üíñ' : '‚ù§Ô∏è';
    heart.style.left = (Math.random() * 100) + 'vw';
    heart.style.fontSize = (20 + Math.random() * 20) + 'px';
    document.getElementById('hearts-container').appendChild(heart);
    setTimeout(() => heart.remove(), 7000);
  }
  function createPetal() {
    const petal = document.createElement('div');
    petal.classList.add('petal');
    petal.innerHTML = 'üå∏';
    petal.style.left = (Math.random() * 100) + 'vw';
    petal.style.fontSize = (18 + Math.random() * 12) + 'px';
    petal.style.animationDuration = (6 + Math.random() * 4) + 's';
    document.getElementById('petals-container').appendChild(petal);
    setTimeout(() => petal.remove(), 11000);
  }

  // Reveal any element when it's near viewport
  function revealVisibleElements() {
    const threshold = window.innerHeight * 0.85;
    [...quotes, ...images].forEach(el => {
      const rect = el.getBoundingClientRect();
      if (rect.top < threshold) el.classList.add('visible');
    });
  }

  // Robust auto-scroll using requestAnimationFrame with delta time
  function startAutoScroll() {
    cancelAutoScroll();
    isScrolling = true;
    // try to ensure momentum scrolling on iOS
    document.body.style.WebkitOverflowScrolling = 'touch';

    const scroller = document.scrollingElement || document.documentElement || document.body;
    let lastTimestamp = null;

    function step(timestamp) {
      if (!isScrolling) return;
      if (!lastTimestamp) lastTimestamp = timestamp;
      const dt = timestamp - lastTimestamp;
      lastTimestamp = timestamp;

      const distance = PIXELS_PER_SECOND * (dt / 1000); // px to move this frame
      window.scrollBy(0, distance);

      revealVisibleElements();

      const maxScroll = Math.max(scroller.scrollHeight - window.innerHeight, 0);
      if (window.scrollY >= maxScroll - 1) {
        // reached the end
        isScrolling = false;
        closingText.classList.add('opacity-100');
        cancelAutoScroll();
        return;
      }
      autoScrollRaf = requestAnimationFrame(step);
    }

    autoScrollRaf = requestAnimationFrame(step);
  }

  function cancelAutoScroll() {
    if (autoScrollRaf) {
      cancelAnimationFrame(autoScrollRaf);
      autoScrollRaf = null;
    }
  }

  // Wait for images to layout ‚Äî avoids incorrect scrollHeight on mobile
  function whenImagesReady(timeout = 1200) {
    return new Promise(resolve => {
      if (images.length === 0) return resolve();
      let loaded = 0;
      images.forEach(img => {
        if (img.complete) {
          loaded++;
        } else {
          img.addEventListener('load', () => {
            loaded++;
            if (loaded === images.length) resolve();
          }, { once: true });
          img.addEventListener('error', () => {
            loaded++; // ignore failed images
            if (loaded === images.length) resolve();
          }, { once: true });
        }
      });
      // fallback: resolve after small timeout to avoid hanging forever
      setTimeout(() => resolve(), timeout);
      if (loaded === images.length) resolve();
    });
  }

  // Start button logic
  startButton.addEventListener('click', async () => {
    // close overlay
    window.scrollTo(0, 0);
    startOverlay.classList.add('opacity-0');
    setTimeout(() => {
      startOverlay.style.display = 'none';
      document.body.style.overflowY = 'auto';
      invitationContainer.classList.remove('opacity-0');
      invitationContainer.classList.add('opacity-100');
    }, 300); // quicker fade-out so mobile can layout

    // music fade-in (attempt playback; browsers may require the click which we have)
    try {
      bgMusic.volume = 0;
      await bgMusic.play();
      let vol = 0;
      const fadeIn = setInterval(() => {
        vol = Math.min(1, vol + 0.04);
        bgMusic.volume = vol;
        if (vol >= 1) clearInterval(fadeIn);
      }, 150);
    } catch (e) {
      // playback might still fail on some devices - acceptable
      console.warn('bgMusic.play() failed:', e);
    }

    // start heart & petal generators (store intervals to clear later if needed)
    heartInterval = setInterval(createHeart, 1200);
    petalInterval = setInterval(createPetal, 1500);

    // ensure layout is settled (images loaded) BEFORE starting auto scroll
    await whenImagesReady(1400);
    // short delay so mobile address bar settles
    setTimeout(() => {
      revealVisibleElements();
      startAutoScroll();
    }, 200);
  });

  // If the user interacts (manual scroll or touch), we keep autoScroll running.
  // If you want user touch to stop auto-scroll, uncomment the handler below:
  // window.addEventListener('touchstart', () => { isScrolling = false; cancelAutoScroll(); }, { passive: true });

});
</script>

</body>
</html>
